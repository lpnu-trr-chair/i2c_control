[eng](README-ENG.mg)

# Керівництво користувача #

## Завантаження вихідних кодів ##
Вихідні коди проекту зберігаються на сайті github за адресою [https://github.com/lpnu-trr-chair/i2c_control.cydsn](https://github.com/lpnu-trr-chair/i2c_control.cydsn). 

![user-manual-1](pic\user-manual-1.jpg)

Завантажити вихідні коди можна двома способами.

1. За допомогою браузера у вигляді zip архіву. Для цього необхідно натиснути кнопку "Clone or download" - > "Download ZIP" та розархівувати отриманий файл.

2. Із командної стрічки, користуючись попередньо встановленю системою управління версіями GIT. Для цього в командній стрічці набираємо

`git clone https://github.com/lpnu-trr-chair/i2c_control.cydsn.git`



## Компіляція та прошивання ##
Прошивка програмного модуля здійснюється за допомогою середовища розробки Cypress PSoC Creator 4.2. Встановити його можна, завантаживши інсталятор із сайту  https://www.cypress.com/products/psoc-creator-integrated-design-environment-ide . Перед прошивкою програмний модуль необхідно скомпілювати.  Для цього відкриваємо файл проекту та  вибираємо в меню програми команди "Build" -> "Build i2c_control"

![user-manual-2](pic\user-manual-2.jpg)

У вікні "Output" з'являються логи компіляції та повідомлення про її успішне завершення

![user-manual-3](pic\user-manual-3.jpg)

Для прошивання програмного модуля під'єднуємо плату PSoC4 за допомогою USB кабелю до комп'ютера та вибираємо в меню "Debug" -> "Select target and program..." або натискаємо в панелі інструментів відповідну іконку

![user-manual-4](pic\user-manual-4.jpg)

Якщо процес прошивки завершився без проблем, то у вікні "Output" з'явиться повідомлення

![user-manual-5](pic\user-manual-5.jpg)



## Схема підключення ##

| Сигнал        | Порт  | Вивід мікросхеми | Примітки                    |
| ------------- | ----- | ---------------- | --------------------------- |
| i2c port: scl | P4[0] | 20               | З'єднати із scl ел. опору   |
| i2c port: sda | P4[1] | 21               | З'єднати із sda ел. опору   |
| UART port: rx | P0[4] | 28               | З'єднати із P12_7 (UART tx) |
| UART port: tx | P0[5] | 29               | З'єднати із P12_6 (UART rx) |
| + 5 B         |       |                  | З'єднати із землею БЖ       |
| GND           |       |                  | З'єднати із +5В БЖ          |

![user-manual-6](pic\user-manual-6.jpg)

## 2Команди управління ##

Управління здійснюється за допомогою команд, що передаються через інтерфейс UART. Кожна команда починається з букви, яка кодує операцію () Наступні два шістнадцяткові символи кодують адреси мікросхем цифрових резисторів. Наступні два шістнадцяткові символи - номер АЦП на кристалі мікросхеми. Останні два шістнадцяткові символи - положення регулятора цифрового резистора. Деталі - на рисунку нижче.

![user-manual-9](pic\user-manual-9.jpg)



 Приклади команд.

 **s 2c 01 00** - встановити максимальне значення напруги на АЦП 1 мікросхеми 01 
 **r 2c 01** - прочитати значення напруги на АЦП 1 мікросхеми 01 

## Робота із програмами терміналу ##

Описані вище команди передаються на плату управління за допомогою спеціалізованих програм-терміналів. Найбільш зручними в користування є Docklight (https://docklight.de/)  та Realterm (https://realterm.sourceforge.io/). Перед початком роботи із терміналом необхідно визначити до якого послідовного порта під'єднаний вхідний UART PSoC 4. Для цього відкриваємо "Диспетчер пристроїв", шукаємо у ньому розділ "Порти (COM та LPT)", а в середині розділу - пристрій із назвою "KitProg USB-UART". Біля нього у дужках вказаний відповідний порт - у нашому випадку COM7

![user-manual-8](pic\user-manual-8.jpg)

Наступний етап - налаштування параметрів роботи відповідного послідовного порта в програмі терміналу. 

Швидкість передачі даних - 9600 біт/с

Кількість біт даних - 8

Кількість стоп біт - 1

Контроль парності - 0

![user-manual-10](pic\user-manual-10.jpg)

Docklight дозволяє попередньо записати команди для наступної передачі

![user-manual-11](pic\user-manual-11.jpg)

![user-manual-12](C:\abench\code\workspace_lpnu_trr_chair\i2c_control.cydsn\manual\pic\user-manual-12.jpg)

Перед передачею даних необхідно відкрити порт передачі даних, натиснувши кнопку "Start Communication" чи клавішу F5. 


###  ###
